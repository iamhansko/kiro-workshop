# MCP Servers

<img src="/img/kiro_mcp_servers.png" />

> [!NOTE]
>
> **MCP** (**Model Context Protocol**)는 Kiro와 같은 AI 에이전트가 외부 서버와 통신하기 위한 표준 규약(프로토콜)입니다. Kiro는 MCP를 통해서 원하는 외부 서버로부터 데이터를 전달받고, 작업을 요청하는 등 다양한 작업을 수행할 수 있습니다.

### 학습 목표
- MCP(Model Context Protocol) 개념 이해
- 기본 MCP 서버 설정
- 외부 도구 연동 체험

이제 Kiro의 동작을 보다 고급 용도에 맞게 조정하기 위해 Kiro 자체를 커스텀할 차례입니다. 이를 위해 Model Context Protocol (MCP)을 통해 Kiro에 새로운 기능을 추가하겠습니다.

### MCP 서버 설정

Kiro는 기본적으로 MCP를 지원합니다. Kiro 좌측 사이드바에서 유령 아이콘(👻)을 선택하고, 목록에서 MCP SERVERS 항목을 찾은 뒤, 수정 아이콘(✏️)을 눌러 mcp.json을 편집합니다. mcp.json을 통해 MCP 서버를 추가할 수 있습니다.

본 워크샵에서는 두 가지 MCP 서버를 추가하겠습니다.

**`AWS Knowledge MCP Server`** : AWS 문서, API 참조, 아키텍처 가이드 등 최신 AWS 지식에 실시간으로 접근할 수 있는 원격 서버입니다. AWS 인증 없이 사용 가능하며, Kiro가 AWS 관련 질문에 더 정확한 최신 정보로 답변할 수 있도록 도와줍니다.

**`Sequential Thinking`** : Kiro가 복잡한 작업을 수행하기 전에 단계별로 사고하고 계획을 수립하도록 도와주는 서버입니다. 문제를 체계적으로 분석하고 순차적인 해결 방안을 제시합니다.

mcp.json 파일의 내용을 다음과 같이 수정합니다. ([예시](https://youtu.be/-IjYrIwRn54?si=UvPaGiPV2GWH-Znl&t=950))

```json copy
{
    "mcpServers": {
        "aws-knowledge-mcp-server": {
            "command": "npx",
            "args": [
                "mcp-remote",
                "https://knowledge-mcp.global.api.aws"
            ]
        },
        "sequential-thinking": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-sequential-thinking@2025.7.1"]
        }
    }
}
```

> [!NOTE] 
> 
> MCP 연결시 AbortError : MCP 서버 연결 시 AbortError가 발생하는 경우, Git Bash 등의 터미널 환경에서 다음 명령을 수행해 npm 캐시를 정리하고 연결을 재시도합니다.
> ```sh copy
> npm cache clean --force
> ```

### AWS Knowledge MCP 서버 활용하기

이제 새로운 MCP 서버를 활용하도록 Kiro의 행동을 조정할 수 있습니다.

커스텀 스티어링 문서 `behavior.md` (.kiro/steering/behavior.md)를 생성하고, 다음 내용을 추가합니다.

```md copy
---
inclusion: always
---

AWS와 관련된 질문은 aws-knowledge-mcp-server를 활용해서 정확한 답변을 할 수 있도록 하세요.
```

이제 Kiro에게 다음과 같이 요청해보세요.

```md copy
EC2에 제일 쉽게 접속하는 방법은 뭐야?
```

![1](/img/mcp_server/1.png)

### 사고 방식 조정하기 

커스텀 스티어링 문서 `behavior.md` (.kiro/steering/behavior.md)를 다시 열고 다음과 같이 수정하세요.

```md copy
---
inclusion: always
---

AWS와 관련된 질문은 aws-knowledge-mcp-server를 활용해서 정확한 답변을 할 수 있도록 하세요.

무언가를 수행하는 방법을 계획할 때, sequentialthinking 도구를 사용하여 다음 여러 단계를 순차적으로 계획하세요.
```

그런 다음 채팅창에 다음과 같이 요청해보세요.

```md copy
이 프로젝트를 AWS에 배포하면 비용이 얼마나 나올까?
```

![2](/img/mcp_server/2.png)

Kiro가 `sequential-thinking`과 `knowledge-mcp-server` 도구를 사용하는 것을 볼 수 있습니다. 만약 `sequential-thinking` 도구가 사용되지 않았다면 동일한 내용의 질문을 다시 제출합니다.

### MCP로 무한히 확장하기

Kiro를 확장하기 위해 MCP 서버를 도입할 경우, 프로젝트 내에서 사용할 수 있는 새로운 데이터 소스, 도구, 행동 패턴 등을 추가할 수 있습니다. 수많은 MCP 서버가 존재하며, 이를 창의적으로 조합하여 Kiro의 능력을 프로젝트에 최적화할 수 있습니다.

- [Awesome MCP Servers](https://github.com/wong2/awesome-mcp-servers)
- [AWS MCP Servers](https://github.com/awslabs/mcp)

이제 Kiro를 여러분의 강력한 파트너로 만들어보세요!